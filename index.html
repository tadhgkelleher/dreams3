<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cosmic Resonance Simulator</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
      font-family: sans-serif;
      color: white;
    }
    #info {
      position: absolute;
      top: 10px;
      left: 10px;
      max-width: 300px;
      padding: 10px;
      background: rgba(0,0,0,0.6);
      z-index: 1;
      font-size: 14px;
    }
  </style>
</head>
<body>
<div id="info">
  <h2>Cosmic Resonance Frequencies</h2>
  <p>Hover over spheres to learn about each frequency layer in the cosmic web of consciousness.</p>
</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/controls/OrbitControls.js"></script>
<script>
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x000000);

  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
  camera.position.set(0, 20, 60);

  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);

  // Logarithmic spiral points generator
  function spiralPoints(turns, spacing, scale) {
    const points = [];
    for (let i = 0; i < turns * 360; i += 5) {
      let angle = i * Math.PI / 180;
      let radius = Math.exp(i / spacing) * scale;
      let x = Math.cos(angle) * radius;
      let y = i * 0.05;
      let z = Math.sin(angle) * radius;
      points.push(new THREE.Vector3(x, y, z));
    }
    return points;
  }

  const spiralGeometry = new THREE.BufferGeometry().setFromPoints(spiralPoints(8, 200, 0.005));
  const spiralMaterial = new THREE.LineBasicMaterial({ color: 0x8888ff });
  const spiralLine = new THREE.Line(spiralGeometry, spiralMaterial);
  scene.add(spiralLine);

  const frequencyLayers = [
    { name: "Theta Waves", color: 0xff66cc, position: [5, 0, 0], freq: "4–8 Hz" },
    { name: "Alpha Waves", color: 0x66ccff, position: [10, 5, 10], freq: "8–12 Hz" },
    { name: "Schumann Resonance", color: 0x00ffcc, position: [15, 10, -10], freq: "~7.83 Hz" },
    { name: "Solar Cycle", color: 0xffff00, position: [25, 15, 10], freq: "~2.9×10⁻⁹ Hz" },
    { name: "Precession", color: 0xff6600, position: [-20, 20, -15], freq: "~1.23×10⁻¹² Hz" }
  ];

  const spheres = [];
  const labels = [];

  const loader = new THREE.TextureLoader();
  const starTexture = loader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js/examples/textures/galaxy_starfield.png');
  const background = new THREE.Mesh(
    new THREE.SphereGeometry(1000, 64, 64),
    new THREE.MeshBasicMaterial({ map: starTexture, side: THREE.BackSide })
  );
  scene.add(background);

  frequencyLayers.forEach(layer => {
    const geometry = new THREE.SphereGeometry(1.5, 32, 32);
    const material = new THREE.MeshBasicMaterial({ color: layer.color });
    const sphere = new THREE.Mesh(geometry, material);
    sphere.position.set(...layer.position);
    scene.add(sphere);
    spheres.push({ mesh: sphere, name: layer.name, freq: layer.freq });
  });

  const raycaster = new THREE.Raycaster();
  const mouse = new THREE.Vector2();

  function onMouseMove(event) {
    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
  }
  window.addEventListener('mousemove', onMouseMove);

  const tooltip = document.createElement('div');
  tooltip.style.position = 'absolute';
  tooltip.style.background = 'rgba(0,0,0,0.8)';
  tooltip.style.padding = '6px';
  tooltip.style.color = 'white';
  tooltip.style.borderRadius = '4px';
  tooltip.style.display = 'none';
  document.body.appendChild(tooltip);

  function animate() {
    requestAnimationFrame(animate);
    raycaster.setFromCamera(mouse, camera);
    const intersects = raycaster.intersectObjects(spheres.map(s => s.mesh));

    if (intersects.length > 0) {
      const obj = intersects[0].object;
      const match = spheres.find(s => s.mesh === obj);
      tooltip.style.left = `${event.clientX + 10}px`;
      tooltip.style.top = `${event.clientY + 10}px`;
      tooltip.style.display = 'block';
      tooltip.innerHTML = `<b>${match.name}</b><br>Frequency: ${match.freq}`;
    } else {
      tooltip.style.display = 'none';
    }

    renderer.render(scene, camera);
  }

  animate();
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>
</body>
</html>
